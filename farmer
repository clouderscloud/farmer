#!/bin/bash

#    Farmer - A lightweight automation tool built for Linux machines
#    Copyright (C) 2017  Manikumar Juttukonda <manikumar.juttukonda@gmail.com>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.

echo "
    Farmer v0.0.1-alpha  Copyright (C) 2017  Manikumar Juttukonda
    This program comes with ABSOLUTELY NO WARRANTY; for details type 'show w'.
    This is free software, and you are welcome to redistribute it
    under certain conditions; type 'show c' for details. 
"
echo "    See <https://disizjay.github.io/farmer/> for more details."

#variables
pid=$$
whereami=`pwd`
home=${whereami}
cd ${home}; stat canal fruits soils seeds &>/dev/null; if [ $? -ne 0 ]; then echo -e "\nError: Required directories(canal, fruits, soils, seeds) are missing. Please make sure to clone most latest source"; exit 1; fi
umask 0027
seconds=0
canal_dir="${home}/canal";
fruits_dir="${home}/fruits";
soils_dir="${home}/soils";
seeds="${home}/seeds";

#functions
function help() {
	echo -e "\nUsage: $0 [option] -user [username] -seed [seedname] -soil [soilname]"
	echo -e "\nOptions"
	echo -e "   info\t: Displays information about existing seeds and soils"
	echo -e "   sow\t: Start deployment. Requires additional parameters -user, -seed and -soil"
	echo -e "   help\t: Show this help"
	echo -e "\nAdditional Parameters"
	echo -e "   -user : Username used to perform action on remote hosts"
	echo -e "   -seed : Directory containing .plow files"
	echo -e "   -soil : Directory containing host groups"
	echo -e "\nExamples"
	echo -e "   To run deployment"
	echo -e "\t $0 sow -user root -seed install-webserver -soil development"
	echo -e "   To dislay information about existing configuration"
	echo -e "\t $0 info "
	echo -e "   For help"
	echo -e "\t $0 help"
	echo -e "   It is always recommended to run 'info' before running 'sow'"
	echo -e "\nSee <https://disizjay.github.io/farmer/> for updates, bug reports, and answers"
}

help

echo -e "\nSorry ! Farmer is not yet ready, still in initial development stage. Please check back later"
#end
