#!/bin/bash
#
#                                                                   __                               
#                                                                  / _|                              
#                                                                 | |_ __ _ _ __ _ __ ___   ___ _ __ 
#                                                                 |  _/ _` | '__| '_ ` _ \ / _ \ '__|
#                                                                 | || (_| | |  | | | | | |  __/ |   
#                                                                 |_| \__,_|_|  |_| |_| |_|\___|_|   
#                                                                                                    
#									By Manikumar Juttukonda                                                                        
#
#
echo -e "\nFarmer v1.0"
echo -e "By Manikumar Juttukonda"
echo -e "\nA lightweight automation tool built for Linux machines"
echo -e "Web site: https://clouderscloud.github.io/farmer/"

#variables
pid=$$
whereami=`pwd`
home=${whereami}
cd ${home}; stat canal fruits soils seeds &>/dev/null; if [ $? -ne 0 ]; then echo -e "\nError: Required directories(canal, fruits, soils, seeds) are missing. Please make sure to clone most latest source"; exit 1; fi
umask 0027
seconds=0
canal_dir="${home}/canal";
fruits_dir="${home}/fruits";
soils_dir="${home}/soils";
seeds="${home}/seeds";

#functions
function help() {
	echo -e "\nUsage: $0 [option] -user [username] -seed [seedname] -soil [soilname]"
	echo -e "\nOptions"
	echo -e "   info\t: Displays information about existing seeds and soils"
	echo -e "   run\t: Start deployment. Requires additional parameters -user, -seed and -soil"
	echo -e "   help\t: Show this help"
	echo -e "\nAdditional Parameters"
	echo -e "   -user : Username used to perform action on remote hosts"
	echo -e "   -seed : Directory containing .plow files"
	echo -e "   -soil : Directory containing host groups"
	echo -e "\nExamples"
	echo -e "   To run deployment"
	echo -e "\t $0 run -user root -seed install-webserver -soil development"
	echo -e "   To dislay information about existing configuration"
	echo -e "\t $0 info "
	echo -e "   For help"
	echo -e "\t $0 help"
	echo -e "\nSee https://clouderscloud.github.io/farmer/ for updates, bug reports, and answers"
}

help

echo -e "\nSorry ! Farmer is not yet ready, still in initial development stage. Please check back later"
echo ""
